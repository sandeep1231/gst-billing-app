{"ast":null,"code":"import { ReactiveFormsModule, Validators } from '@angular/forms';\nimport { NgbTypeaheadModule } from '@ng-bootstrap/ng-bootstrap';\nimport { of } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap, catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@ng-bootstrap/ng-bootstrap\";\nexport let InvoiceFormComponent = /*#__PURE__*/(() => {\n  class InvoiceFormComponent {\n    constructor(fb) {\n      this.fb = fb;\n      this.form = this.fb.group({\n        customer: this.fb.control(null, Validators.required),\n        customerName: [''],\n        mobile: [''],\n        address: [''],\n        gstin: ['']\n      });\n      this.formatter = name => name;\n      // TODO: wire to backend when auth token available\n      this.search = text$ => text$.pipe(debounceTime(200), distinctUntilChanged(), switchMap(term => term && term.length >= 2 ? of([term]) : of([])), catchError(() => of([])));\n    }\n    submit() {\n      if (this.form.invalid) return;\n      const payload = this.form.value;\n      console.log('Invoice payload', payload);\n    }\n    static {\n      this.ɵfac = function InvoiceFormComponent_Factory(t) {\n        return new (t || InvoiceFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: InvoiceFormComponent,\n        selectors: [[\"app-invoice-form\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 26,\n        vars: 4,\n        consts: [[1, \"row\", \"g-3\", 3, \"formGroup\", \"ngSubmit\"], [1, \"col-12\"], [1, \"form-label\"], [\"type\", \"text\", \"formControlName\", \"customer\", \"placeholder\", \"Search customer by name/mobile (min 2 chars)\", 1, \"form-control\", 3, \"ngbTypeahead\", \"resultFormatter\", \"inputFormatter\"], [1, \"form-text\"], [1, \"col-md-6\"], [\"type\", \"text\", \"formControlName\", \"customerName\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"mobile\", 1, \"form-control\"], [\"rows\", \"2\", \"formControlName\", \"address\", 1, \"form-control\"], [\"type\", \"text\", \"formControlName\", \"gstin\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"]],\n        template: function InvoiceFormComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"form\", 0);\n            i0.ɵɵlistener(\"ngSubmit\", function InvoiceFormComponent_Template_form_ngSubmit_0_listener() {\n              return ctx.submit();\n            });\n            i0.ɵɵelementStart(1, \"div\", 1)(2, \"label\", 2);\n            i0.ɵɵtext(3, \"Customer\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(4, \"input\", 3);\n            i0.ɵɵelementStart(5, \"div\", 4);\n            i0.ɵɵtext(6, \"Select existing or leave and fill details below.\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(7, \"div\", 5)(8, \"label\", 2);\n            i0.ɵɵtext(9, \"Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(10, \"input\", 6);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"div\", 5)(12, \"label\", 2);\n            i0.ɵɵtext(13, \"Mobile\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(14, \"input\", 7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"div\", 1)(16, \"label\", 2);\n            i0.ɵɵtext(17, \"Address\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(18, \"textarea\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(19, \"div\", 5)(20, \"label\", 2);\n            i0.ɵɵtext(21, \"GSTIN\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(22, \"input\", 9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(23, \"div\", 1)(24, \"button\", 10);\n            i0.ɵɵtext(25, \"Generate Invoice\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngbTypeahead\", ctx.search)(\"resultFormatter\", ctx.formatter)(\"inputFormatter\", ctx.formatter);\n          }\n        },\n        dependencies: [ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, NgbTypeaheadModule, i2.NgbTypeahead],\n        encapsulation: 2\n      });\n    }\n  }\n  return InvoiceFormComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}