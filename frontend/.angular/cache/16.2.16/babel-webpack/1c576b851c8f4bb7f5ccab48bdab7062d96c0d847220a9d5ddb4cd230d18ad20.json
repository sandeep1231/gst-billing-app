{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { ApiService } from '../../services/api.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nexport let BalanceSheetPage = /*#__PURE__*/(() => {\n  class BalanceSheetPage {\n    constructor() {\n      this.api = inject(ApiService);\n      this.data = null;\n      this.date = null; // YYYY-MM-DD\n    }\n\n    ngOnInit() {\n      this.reload();\n    }\n    reload() {\n      const params = {};\n      if (this.date) params.date = this.date;\n      this.api.get('/reports/balance-sheet', params).subscribe({\n        next: d => this.data = d,\n        error: () => this.data = null\n      });\n    }\n    clearDate() {\n      this.date = null;\n      this.reload();\n    }\n    exportCsv() {\n      if (!this.data) return;\n      const d = this.data;\n      const rows = [['As Of', new Date(d.asOf).toISOString()], ['Inventory', d.assets.inventory.toFixed(2)], ['Accounts Receivable', d.assets.accountsReceivable.toFixed(2)], ['Accounts Payable', d.liabilities.accountsPayable.toFixed(2)], ['Total Assets', d.assets.total.toFixed(2)], ['Total Liabilities', d.liabilities.total.toFixed(2)], ['Owner Equity', d.equity.toFixed(2)]];\n      const csv = rows.map(r => r.map(v => '\"' + String(v).replace(/\"/g, '\"\"') + '\"').join(',')).join('\\n');\n      const blob = new Blob([csv], {\n        type: 'text/csv;charset=utf-8;'\n      });\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = `balance-sheet-${this.date || 'today'}.csv`;\n      a.click();\n      URL.revokeObjectURL(url);\n    }\n    static {\n      this.ɵfac = function BalanceSheetPage_Factory(t) {\n        return new (t || BalanceSheetPage)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: BalanceSheetPage,\n        selectors: [[\"ng-component\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 72,\n        vars: 31,\n        consts: [[1, \"row\", \"g-3\"], [1, \"col-12\", \"d-flex\", \"align-items-center\", \"justify-content-between\"], [1, \"m-0\"], [1, \"text-muted\"], [1, \"d-flex\", \"align-items-center\", \"gap-2\", 3, \"ngSubmit\"], [\"f\", \"ngForm\"], [\"type\", \"date\", \"name\", \"date\", 1, \"form-control\", \"form-control-sm\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-sm\", \"btn-outline-primary\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-secondary\", 3, \"disabled\", \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-sm\", \"btn-outline-success\", 3, \"disabled\", \"click\"], [1, \"col-md-4\"], [1, \"card\", \"h-100\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"d-flex\", \"justify-content-between\"], [1, \"d-flex\", \"justify-content-between\", \"fw-semibold\"], [1, \"mt-3\", \"text-muted\", \"small\"]],\n        template: function BalanceSheetPage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\")(3, \"h5\", 2);\n            i0.ɵɵtext(4, \"Balance Sheet\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"div\", 3);\n            i0.ɵɵtext(6);\n            i0.ɵɵpipe(7, \"date\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"form\", 4, 5);\n            i0.ɵɵlistener(\"ngSubmit\", function BalanceSheetPage_Template_form_ngSubmit_8_listener() {\n              return ctx.reload();\n            });\n            i0.ɵɵelementStart(10, \"input\", 6);\n            i0.ɵɵlistener(\"ngModelChange\", function BalanceSheetPage_Template_input_ngModelChange_10_listener($event) {\n              return ctx.date = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"button\", 7);\n            i0.ɵɵtext(12, \"Load\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function BalanceSheetPage_Template_button_click_13_listener() {\n              return ctx.clearDate();\n            });\n            i0.ɵɵtext(14, \"Clear\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"button\", 9);\n            i0.ɵɵlistener(\"click\", function BalanceSheetPage_Template_button_click_15_listener() {\n              return ctx.exportCsv();\n            });\n            i0.ɵɵtext(16, \"Export CSV\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(17, \"div\", 10)(18, \"div\", 11)(19, \"div\", 12)(20, \"h6\", 13);\n            i0.ɵɵtext(21, \"Assets\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"div\", 14)(23, \"span\");\n            i0.ɵɵtext(24, \"Inventory\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(25, \"span\");\n            i0.ɵɵtext(26);\n            i0.ɵɵpipe(27, \"number\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(28, \"div\", 14)(29, \"span\");\n            i0.ɵɵtext(30, \"Accounts Receivable\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"span\");\n            i0.ɵɵtext(32);\n            i0.ɵɵpipe(33, \"number\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(34, \"hr\");\n            i0.ɵɵelementStart(35, \"div\", 15)(36, \"span\");\n            i0.ɵɵtext(37, \"Total Assets\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(38, \"span\");\n            i0.ɵɵtext(39);\n            i0.ɵɵpipe(40, \"number\");\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelementStart(41, \"div\", 10)(42, \"div\", 11)(43, \"div\", 12)(44, \"h6\", 13);\n            i0.ɵɵtext(45, \"Liabilities\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(46, \"div\", 14)(47, \"span\");\n            i0.ɵɵtext(48, \"Accounts Payable\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(49, \"span\");\n            i0.ɵɵtext(50);\n            i0.ɵɵpipe(51, \"number\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(52, \"hr\");\n            i0.ɵɵelementStart(53, \"div\", 15)(54, \"span\");\n            i0.ɵɵtext(55, \"Total Liabilities\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(56, \"span\");\n            i0.ɵɵtext(57);\n            i0.ɵɵpipe(58, \"number\");\n            i0.ɵɵelementEnd()()()()();\n            i0.ɵɵelementStart(59, \"div\", 10)(60, \"div\", 11)(61, \"div\", 12)(62, \"h6\", 13);\n            i0.ɵɵtext(63, \"Equity\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(64, \"div\", 14)(65, \"span\");\n            i0.ɵɵtext(66, \"Owner's Equity\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(67, \"span\");\n            i0.ɵɵtext(68);\n            i0.ɵɵpipe(69, \"number\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(70, \"div\", 16);\n            i0.ɵɵtext(71, \"Computed as Assets - Liabilities\");\n            i0.ɵɵelementEnd()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate1(\"As of \", i0.ɵɵpipeBind2(7, 10, ctx.data == null ? null : ctx.data.asOf, \"medium\") || \"-\", \"\");\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.date);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"disabled\", !ctx.date);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", !ctx.data);\n            i0.ɵɵadvance(11);\n            i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind2(27, 13, ctx.data == null ? null : ctx.data.assets.inventory, \"1.2-2\"), \"\");\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind2(33, 16, ctx.data == null ? null : ctx.data.assets.accountsReceivable, \"1.2-2\"), \"\");\n            i0.ɵɵadvance(7);\n            i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind2(40, 19, ctx.data == null ? null : ctx.data.assets.total, \"1.2-2\"), \"\");\n            i0.ɵɵadvance(11);\n            i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind2(51, 22, ctx.data == null ? null : ctx.data.liabilities.accountsPayable, \"1.2-2\"), \"\");\n            i0.ɵɵadvance(7);\n            i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind2(58, 25, ctx.data == null ? null : ctx.data.liabilities.total, \"1.2-2\"), \"\");\n            i0.ɵɵadvance(11);\n            i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind2(69, 28, ctx.data == null ? null : ctx.data.equity, \"1.2-2\"), \"\");\n          }\n        },\n        dependencies: [CommonModule, i1.DecimalPipe, i1.DatePipe, FormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.NgModel, i2.NgForm],\n        encapsulation: 2\n      });\n    }\n  }\n  return BalanceSheetPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}