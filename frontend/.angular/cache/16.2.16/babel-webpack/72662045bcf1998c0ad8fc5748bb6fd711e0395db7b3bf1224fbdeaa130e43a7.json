{"ast":null,"code":"import { inject } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { CompanyService } from '../../services/company.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nfunction SettingsPage_div_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19);\n    i0.ɵɵtext(1, \"Saved.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let SettingsPage = /*#__PURE__*/(() => {\n  class SettingsPage {\n    constructor() {\n      this.fb = inject(FormBuilder);\n      this.svc = inject(CompanyService);\n      this.saving = false;\n      this.saved = false;\n      this.form = this.fb.group({\n        name: ['', Validators.required],\n        gstin: [''],\n        stateCode: [''],\n        line1: [''],\n        line2: [''],\n        city: [''],\n        state: [''],\n        pincode: ['']\n      });\n    }\n    ngOnInit() {\n      this.reload();\n    }\n    reload() {\n      this.saved = false;\n      this.svc.getMe().subscribe({\n        next: c => {\n          this.form.patchValue({\n            name: c.name,\n            gstin: c.gstin || '',\n            stateCode: c.stateCode || '',\n            line1: c.address?.line1 || '',\n            line2: c.address?.line2 || '',\n            city: c.address?.city || '',\n            state: c.address?.state || '',\n            pincode: c.address?.pincode || ''\n          });\n        }\n      });\n    }\n    save() {\n      if (this.form.invalid) return;\n      this.saving = true;\n      const v = this.form.value;\n      const body = {\n        name: v.name,\n        gstin: v.gstin || undefined,\n        stateCode: v.stateCode || undefined,\n        address: {\n          line1: v.line1 || undefined,\n          line2: v.line2 || undefined,\n          city: v.city || undefined,\n          state: v.state || undefined,\n          pincode: v.pincode || undefined\n        }\n      };\n      this.svc.updateMe(body).subscribe({\n        next: () => {\n          this.saving = false;\n          this.saved = true;\n        },\n        error: () => {\n          this.saving = false;\n          this.saved = false;\n        }\n      });\n    }\n    static {\n      this.ɵfac = function SettingsPage_Factory(t) {\n        return new (t || SettingsPage)();\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SettingsPage,\n        selectors: [[\"app-settings\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 42,\n        vars: 4,\n        consts: [[1, \"d-flex\", \"align-items-center\", \"mb-3\"], [1, \"m-0\"], [1, \"row\", \"g-3\", 3, \"formGroup\", \"ngSubmit\"], [1, \"col-md-6\"], [1, \"form-label\"], [\"formControlName\", \"name\", 1, \"form-control\"], [1, \"col-md-3\"], [\"formControlName\", \"gstin\", 1, \"form-control\"], [\"maxlength\", \"2\", \"placeholder\", \"e.g., KA\", \"formControlName\", \"stateCode\", 1, \"form-control\"], [\"formControlName\", \"line1\", 1, \"form-control\"], [\"formControlName\", \"line2\", 1, \"form-control\"], [1, \"col-md-4\"], [\"formControlName\", \"city\", 1, \"form-control\"], [\"formControlName\", \"state\", 1, \"form-control\"], [\"formControlName\", \"pincode\", 1, \"form-control\"], [1, \"col-12\", \"d-flex\", \"gap-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"disabled\"], [\"type\", \"button\", 1, \"btn\", \"btn-outline-secondary\", 3, \"disabled\", \"click\"], [\"class\", \"ms-auto\", \"style\", \"align-self:center; color: #198754;\", 4, \"ngIf\"], [1, \"ms-auto\", 2, \"align-self\", \"center\", \"color\", \"#198754\"]],\n        template: function SettingsPage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h4\", 1);\n            i0.ɵɵtext(2, \"Company Settings\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(3, \"form\", 2);\n            i0.ɵɵlistener(\"ngSubmit\", function SettingsPage_Template_form_ngSubmit_3_listener() {\n              return ctx.save();\n            });\n            i0.ɵɵelementStart(4, \"div\", 3)(5, \"label\", 4);\n            i0.ɵɵtext(6, \"Company Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(7, \"input\", 5);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 6)(9, \"label\", 4);\n            i0.ɵɵtext(10, \"GSTIN\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(11, \"input\", 7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"div\", 6)(13, \"label\", 4);\n            i0.ɵɵtext(14, \"State Code\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(15, \"input\", 8);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"div\", 3)(17, \"label\", 4);\n            i0.ɵɵtext(18, \"Address Line 1\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(19, \"input\", 9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"div\", 3)(21, \"label\", 4);\n            i0.ɵɵtext(22, \"Address Line 2\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(23, \"input\", 10);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"div\", 11)(25, \"label\", 4);\n            i0.ɵɵtext(26, \"City\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(27, \"input\", 12);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(28, \"div\", 11)(29, \"label\", 4);\n            i0.ɵɵtext(30, \"State\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(31, \"input\", 13);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(32, \"div\", 11)(33, \"label\", 4);\n            i0.ɵɵtext(34, \"PIN Code\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(35, \"input\", 14);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(36, \"div\", 15)(37, \"button\", 16);\n            i0.ɵɵtext(38, \"Save\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(39, \"button\", 17);\n            i0.ɵɵlistener(\"click\", function SettingsPage_Template_button_click_39_listener() {\n              return ctx.reload();\n            });\n            i0.ɵɵtext(40, \"Reload\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(41, SettingsPage_div_41_Template, 2, 0, \"div\", 18);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(34);\n            i0.ɵɵproperty(\"disabled\", ctx.form.invalid || ctx.saving);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"disabled\", ctx.saving);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngIf\", ctx.saved);\n          }\n        },\n        dependencies: [CommonModule, i1.NgIf, ReactiveFormsModule, i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.MaxLengthValidator, i2.FormGroupDirective, i2.FormControlName],\n        encapsulation: 2\n      });\n    }\n  }\n  return SettingsPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}